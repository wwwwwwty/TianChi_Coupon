# 天池优惠券竞赛

>本次竞赛数据包含用户，商家，优惠券信息，预测目标是用户在15日内使用优惠券消费的概率，评价指标为AUC值。

## 项目结构
- data目录: 存放训练数据，验证数据和测试数据。
- model目录: 保存训练模型。
- result目录: 保存训练结果csv文件。

- try_feature.py: 提取数据特征，将数据分割为训练集，验证集和测试集。
- try_xgb.py: 使用xgboost模型训练。
- try_lightgbm.py: 使用lightgbm模型训练数据

## 特征提取

>由于数据中包含用户信息，商家信息和优惠券信息，因此在特征提取时，将特征分为5个大类总计55个特征:

- 优惠券相关: 发券日期（月份，周数，距离结束的时间），优惠券满减额度，折扣率等等；
- 商家相关: 商家发出的优惠券数量，使用数量，使用率，最近距离等；
- 用户相关: 优惠券使用率，使用时间间隔，与商家的最大最小距离等；
- 用户-优惠券组合相关: 用户对某种优惠券的持有量，消费量等
- 其他特征

## 训练模型

>开始阶段使用了LogisticRgression，RandomForest和SVM训练，后期使用了Xgboost和LightGbm模型训练，在训练速度和准确率上取得了较好的效果。

>XGboost调参包括: eta, subsample, colsample_bytree, max_depth, min_child_weight, gamma 这几项

## 预测结果

XGboost模型测试集AUC值0.7862; 
LightBgm模型测试集AUC值0.7786。

对结果影响最大的10个特征如下，得分越高表示特征对结果的影响越大：

特征 | 得分
---|---
指定商家的消费总次数 | 10116
使用优惠券消费所占比例 | 7864
发出优惠券日期距离活动结束的时间 | 6805
优惠券折扣率 | 6513
指定优惠券的消费数 | 6070
指定优惠券发出的数量 | 5968
发放优惠券的月份 | 5490
优惠券满减额 | 5277
用户收到优惠券总数 | 4317
与商家的距离 | 3988
